(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[16],{204:function(e,t,a){"use strict";a.r(t);var r=a(5),n=a(23),o=a(7),s=a(8),i=a(10),l=a(9),c=a(72),d=a.n(c),u=a(85),m=a(0),h=a.n(m),p=a(308),f=a(202),g=a(83),E=a(174),b=a(309),_=a(292),w=a(60),v=a(159),C=a(90),S=(a(86),a(71)),x=a.n(S),O=a(61),N=a(66),y=a(20),D=x.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),j=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).fetchData=function(e){r.setState({loading:!0});var t="?page="+(parseInt(e.page)+1);t=t+"&limit="+parseInt(e.pageSize),e.filtered.map((function(e){t=t+"&filter["+e.id+"]="+e.value})),e.sorted.map((function(e){t=e.desc?t+"&sort=-"+e.id:t+"&sort="+e.id})),r.setState({parameter:t},(function(){r.getData()}))},r.getData=Object(u.debounce)((function(){d()({methos:"GET",url:"".concat(r.props.base_api_url,"users").concat(r.state.parameter),headers:{Authorization:r.props.auth_token}}).then((function(e){r.setState({tableData:e.data.data,total_pages:e.data.last_page,loading:!1})})).catch((function(e){try{"Unauthorized."===e.response.data&&x.a.fire({title:"Session Expired!",text:"please re-login",icon:"error",confirmButtonText:"Login",allowOutsideClick:!1}).then((function(){localStorage.clear(),window.location.href="login"}))}catch(e){x.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))}),500),r.handleCreate=function(){r.setState({edit:!1,errors:[],id:"",name:"",email:"",role:"user",password:"",department_id:"",department_name:"",position_id:"",position_name:"",schedule_id:"",schedule_name:"",password_confirmation:"",modalShow:!0})},r.handleDelete=function(e){x.a.fire({title:"Are you sure?",text:"You will not able to revert this!!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.value&&d()({method:"DELETE",url:r.props.base_api_url+"users",data:{id:e.id},headers:{Authorization:r.props.auth_token}}).then((function(e){r.getData(),D.fire({icon:"success",title:"User Deleted"})})).catch((function(e){x.a.fire("Oops...","Something Wrong!","error")}))}))},r.handleSubmit=function(e){var t;e.preventDefault(),t=r.state.edit?r.props.base_api_url+"users/"+r.state.id:r.props.base_api_url+"users",d()({method:r.state.edit?"PUT":"POST",url:t,data:{name:r.state.name,email:r.state.email,role:r.state.role,password:r.state.password,department_id:r.state.department_id,department_name:r.state.department_name,position_id:r.state.position_id,position_name:r.state.position_name,schedule_id:r.state.schedule_id,schedule_name:r.state.schedule_name,password_confirmation:r.state.password_confirmation},headers:{Authorization:r.props.auth_token}}).then((function(e){r.getData(),r.setState({modalShow:!1}),D.fire({icon:"success",title:r.state.edit?"User Update":"User Created"})})).catch((function(e){try{"Unauthorized."===e.response.data?x.a.fire("Session Expired!","please re-login","error").then((function(e){e.value&&(localStorage.clear(),window.location.href="login")})):422===e.response.status&&r.setState({errors:e.response.data.errors})}catch(e){x.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))},r.handleChange=function(e){var t=e.target,a=t.name,o=t.value;r.setState(Object(n.a)({},a,o))},r.getDepartment=function(){d()({method:"GET",url:r.props.base_api_url+"getDepartment",headers:{Authorization:r.props.auth_token}}).then((function(e){r.setState({departmentData:e.data})})).catch((function(e){try{"Unauthorized."===e.response.data?x.a.fire("Session Expired!","please re-login","error").then((function(e){e.value&&(localStorage.clear(),window.location.href="login")})):422===e.response.status&&r.setState({errors:e.response.data.errors})}catch(e){x.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))},r.getPosition=function(){d()({method:"GET",url:r.props.base_api_url+"getPosition",headers:{Authorization:r.props.auth_token}}).then((function(e){r.setState({positionData:e.data})})).catch((function(e){try{"Unauthorized."===e.response.data?x.a.fire("Session Expired!","please re-login","error").then((function(e){e.value&&(localStorage.clear(),window.location.href="login")})):422===e.response.status&&r.setState({errors:e.response.data.errors})}catch(e){x.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))},r.getSchedule=function(){d()({method:"GET",url:r.props.base_api_url+"getSchedule",headers:{Authorization:r.props.auth_token}}).then((function(e){r.setState({scheduleData:e.data})})).catch((function(e){try{"Unauthorized."===e.response.data?x.a.fire("Session Expired!","please re-login","error").then((function(e){e.value&&(localStorage.clear(),window.location.href="login")})):422===e.response.status&&r.setState({errors:e.response.data.errors})}catch(e){x.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))},r.onSelectChange=function(e,t){e&&r.setState(Object(n.a)({},t.name,e.value))},r.state={loading:!0,parameter:"",errors:[],tableData:[],departmentData:[],positionData:[],scheduleData:[],modalShow:!1,id:"",name:"",email:"",password:"",password_confirmation:"",role:"",department_id:"",department_name:"",position_id:"",position_name:"",schedule_id:"",schedule_name:""},r}return Object(s.a)(a,[{key:"handleEdit",value:function(e){this.setState({edit:!0,errors:[],id:e.id,name:e.name,email:e.email,password:"",role:e.role,department_id:e.department_id,department_name:e.department_name,position_id:e.position_id,schedule_id:e.schedule_id,schedule_name:e.schedule_name,position_name:e.position_name,password_confirmation:"",modalShow:!0})}},{key:"componentDidMount",value:function(){var e=this;this.getDepartment(),this.getPosition(),this.getSchedule(),w.ValidatorForm.addValidationRule("isPasswordMatch",(function(t){return t===e.state.password}))}},{key:"componentWillUnmount",value:function(){w.ValidatorForm.removeValidationRule("isPasswordMatch")}},{key:"render",value:function(){var e=this,t=[{Header:"#",id:"row",filterable:!1,sortable:!1,width:50,Cell:function(e){return e.original.row_num?h.a.createElement("div",null,e.original.row_num):h.a.createElement("div",null,e.index+1)}},{Header:"Name",accessor:"name",filterable:!0},{Header:"Email",accessor:"email",filterable:!0},{Header:"Position",accessor:"position_name",filterable:!0},{Header:"Department",accessor:"department_name",filterable:!0},{Header:"Schedule",accessor:"schedule_name",filterable:!0},{Header:"Role",accessor:"role",filterable:!0},{Header:"created_at",accessor:"created_at",filterable:!0},{Header:"updated_at",accessor:"updated_at",filterable:!0},{Header:"Action",sortable:!1,Cell:function(t){return h.a.createElement("div",{align:"center"},h.a.createElement("h5",null,h.a.createElement("a",{href:"#!",onClick:function(){return e.handleEdit(t.original)}},h.a.createElement(p.a,{variant:"success",className:"mr-2"},"Edit ",h.a.createElement("i",{className:"feather icon-edit"}))),h.a.createElement("a",{href:"#!",onClick:function(){return e.handleDelete(t.original)}},h.a.createElement(p.a,{variant:"danger",className:"mr-2"},"Delete ",h.a.createElement("i",{className:"feather icon-trash-2"})))))}}];return h.a.createElement(y.a,null,h.a.createElement(f.a,null,h.a.createElement(g.a,null,h.a.createElement(E.a,{size:"sm",variant:"primary",style:{width:150},className:"mt-n5 shadow-2 float-right",onClick:this.handleCreate},"Create"),h.a.createElement(N.a,{title:"Users",isOption:!0},h.a.createElement(C.a,{manual:!0,data:this.state.tableData,columns:t,pages:this.state.total_pages,loading:this.state.loading,defaultPageSize:10,onFetchData:function(t,a){e.fetchData(t)},sortable:!0,className:"-striped -highlight"})))),h.a.createElement(b.a,{size:"lg",show:this.state.modalShow,onHide:function(){e.setState({modalShow:!1})}},h.a.createElement(w.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit},h.a.createElement(b.a.Header,{closeButton:!0},h.a.createElement(b.a.Title,null,"User")),h.a.createElement(b.a.Body,null,h.a.createElement(_.a.Group,null,h.a.createElement(_.a.Label,null,"Name"),h.a.createElement(O.a,{onChange:this.handleChange,type:"text",name:"name",value:this.state.name,validators:["required"],errorMessages:["this field is required"],placeholder:"Username"}),h.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.username)),h.a.createElement(_.a.Group,null,h.a.createElement(_.a.Label,null,"Email"),h.a.createElement(O.a,{onChange:this.handleChange,type:"text",name:"email",value:this.state.email,validators:["required","isEmail"],errorMessages:["this field is required","email is not valid"],placeholder:"Email"}),h.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.email)),h.a.createElement(_.a.Row,null,h.a.createElement(_.a.Group,{as:g.a,lg:"6",sm:"12"},h.a.createElement(_.a.Label,null,"Position"),h.a.createElement(v.a,Object.assign({onChange:this.onSelectChange,name:"position_id",placeholder:"Select Position",isClearable:!1,isMulti:!1},this.state.edit?{defaultValue:{value:this.state.position_id,label:this.state.position_name}}:{},{options:this.state.positionData,styles:this.state.errors.position_id?{control:function(e,t){return Object(r.a)({},e,{"&:hover":{borderColor:"#dc3545"},borderColor:"#dc3545",boxShadow:"none"})}}:{}})),h.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.position_id)),h.a.createElement(_.a.Group,{as:g.a,lg:"6",sm:"12"},h.a.createElement(_.a.Label,null,"Department"),h.a.createElement(v.a,Object.assign({onChange:this.onSelectChange,name:"department_id",placeholder:"Select Department",isClearable:!1,isMulti:!1},this.state.edit?{defaultValue:{value:this.state.department_id,label:this.state.department_name}}:{},{options:this.state.departmentData,styles:this.state.errors.department_id?{control:function(e,t){return Object(r.a)({},e,{"&:hover":{borderColor:"#dc3545"},borderColor:"#dc3545",boxShadow:"none"})}}:{}})),h.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.department_id)),h.a.createElement(_.a.Group,{as:g.a,lg:"6",sm:"12"},h.a.createElement(_.a.Label,null,"Schedule"),h.a.createElement(v.a,Object.assign({onChange:this.onSelectChange,name:"schedule_id",placeholder:"Select Schedule",isClearable:!1,isMulti:!1},this.state.edit?{defaultValue:{value:this.state.schedule_id,label:this.state.schedule_name}}:{},{options:this.state.scheduleData,styles:this.state.errors.schedule_id?{control:function(e,t){return Object(r.a)({},e,{"&:hover":{borderColor:"#dc3545"},borderColor:"#dc3545",boxShadow:"none"})}}:{}})),h.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.schedule_id)),h.a.createElement(_.a.Group,{as:g.a,lg:"6",sm:"12"},h.a.createElement(_.a.Label,null,"Role"),h.a.createElement(v.a,{onChange:this.onSelectChange,name:"role",placeholder:"Select Role",isClearable:!1,isMulti:!1,defaultValue:{value:this.state.role,label:this.state.role},options:[{value:"admin",label:"admin"},{value:"user",label:"user"}],styles:this.state.errors.role?{control:function(e,t){return Object(r.a)({},e,{"&:hover":{borderColor:"#dc3545"},borderColor:"#dc3545",boxShadow:"none"})}}:{}}),h.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.role))),h.a.createElement(_.a.Group,null,h.a.createElement(_.a.Label,null,"Password"),h.a.createElement(O.a,Object.assign({onChange:this.handleChange,type:"password",name:"password",value:this.state.password},this.state.edit?{}:{validators:["required"],errorMessages:["this field is required"]},{placeholder:"******"})),h.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.password)),""!==this.state.password?h.a.createElement(_.a.Group,null,h.a.createElement(_.a.Label,null,"Repeat Password"),h.a.createElement(O.a,{onChange:this.handleChange,type:"password",name:"password_confirmation",value:this.state.password_confirmation,validators:["required","isPasswordMatch"],errorMessages:["this field is required","Password Dosn't Match"],placeholder:"******"}),h.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.password_confirmation)):null),h.a.createElement(b.a.Footer,null,h.a.createElement(E.a,{size:"sm",variant:"secondary",onClick:function(){e.setState({modalShow:!1})}},"Close"),h.a.createElement(E.a,{size:"sm",type:"submit",variant:"primary"},this.state.edit?"Edit":"Create")))))}}]),a}(m.Component);t.default=j},61:function(e,t,a){"use strict";var r=a(68),n=a(7),o=a(8),s=a(10),i=a(9),l=a(0),c=a.n(l),d=a(60),u=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.errorMessages,t.validators,t.requiredError,t.validatorListener,Object(r.a)(t,["errorMessages","validators","requiredError","validatorListener"]));return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",Object.assign({className:this.state.isValid?"form-control":"form-control invalid"},a,{ref:function(t){e.input=t}})),this.errorText())}},{key:"errorText",value:function(){return this.state.isValid?null:c.a.createElement("small",{className:"form-text text-danger text-left"},this.getErrorMessage())}}]),a}(d.ValidatorComponent);t.a=u},66:function(e,t,a){"use strict";var r=a(15),n=a(7),o=a(8),s=a(10),i=a(9),l=a(0),c=a.n(l),d=a(311),u=a(162),m=a(307),h=a(62),p=a.n(h),f=a(20),g=a(58),E=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return Object(o.a)(a,[{key:"render",value:function(){var e,t,a,n,o,s=this,i=[];return this.state.isOption&&(a=c.a.createElement("div",{className:"card-header-right"},c.a.createElement(d.a,{alignRight:!0,className:"btn-group card-option"},c.a.createElement(d.a.Toggle,{id:"dropdown-basic",className:"btn-icon"},c.a.createElement("i",{className:"feather icon-more-horizontal"})),c.a.createElement(d.a.Menu,{as:"ul",className:"list-unstyled card-option"},c.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){s.setState((function(e){return{fullCard:!e.fullCard}}))}},c.a.createElement("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),c.a.createElement("a",{href:g.a.BLANK_LINK}," ",this.state.fullCard?"Restore":"Maximize"," ")),c.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){s.setState((function(e){return{collapseCard:!e.collapseCard}}))}},c.a.createElement("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),c.a.createElement("a",{href:g.a.BLANK_LINK}," ",this.state.collapseCard?"Expand":"Collapse"," ")))))),n=c.a.createElement(u.a.Header,null,c.a.createElement(u.a.Title,{as:"h5"},this.props.title),a),this.state.fullCard&&(i=[].concat(Object(r.a)(i),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(i=[].concat(Object(r.a)(i),["card-load"]),t=c.a.createElement("div",{className:"card-loader"},c.a.createElement("i",{className:"pct-loader1 anim-rotate"}))),this.state.cardRemove&&(i=[].concat(Object(r.a)(i),["d-none"])),this.props.cardClass&&(i=[].concat(Object(r.a)(i),[this.props.cardClass])),o=c.a.createElement(u.a,{className:i.join(" "),style:e},n,c.a.createElement(m.a,{in:!this.state.collapseCard},c.a.createElement("div",null,c.a.createElement(u.a.Body,null,this.props.children))),t),c.a.createElement(f.a,null,o)}}]),a}(l.Component);t.a=p()(E)}}]);