(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[18],{273:function(e,t,a){"use strict";a.r(t);var r=a(23),n=a(5),o=a(7),i=a(8),s=a(10),l=a(9),u=a(274),c=a(0),d=a.n(c),h=a(162),p=a(292),m=a(83),f=a(174),g=a(20),v=a(60),E=a(61),b=a(72),w=a.n(b),x=a(71),C=a.n(x),O=C.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),y=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).getData=function(){w()({method:"GET",url:i.props.base_api_url+"location",headers:{Authorization:i.props.auth_token}}).then((function(e){i.setState((function(t){return{radius:parseInt(e.data.radius),id:e.data.id,position:Object(n.a)({},t,{lat:parseFloat(e.data.lat),lng:parseFloat(e.data.lng)})}}))})).catch((function(e){try{"Unauthorized."===e.response.data?C.a.fire("Session Expired!","please re-login","error").then((function(e){e.value&&(localStorage.clear(),window.location.href="login")})):422===e.response.status&&i.setState({errors:e.response.data.errors})}catch(e){C.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))},i.handleChange=function(e){var t=e.target,a=t.name,o=t.value;i.setState((function(e){return{position:Object(n.a)({},e.position,Object(r.a)({},a,parseFloat(o)))}})),console.log(i.state.position)},i.handleSubmit=function(e){e.preventDefault(),C.a.fire({title:"Are you sure?",text:"You will not able to revert this!!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Change it!"}).then((function(e){e.value&&w()({method:"PUT",url:i.props.base_api_url+"location/"+i.state.id,data:{radius:i.state.radius,lat:i.state.position.lat,lng:i.state.position.lng},headers:{Authorization:i.props.auth_token}}).then((function(e){O.fire({icon:"success",title:"Change Data Success"})})).catch((function(e){try{"Unauthorized."===e.response.data?C.a.fire("Session Expired!","please re-login","error").then((function(e){e.value&&(localStorage.clear(),window.location.href="login")})):422===e.response.status&&i.setState({errors:e.response.data.errors})}catch(e){C.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))}))},i.state={position:{lat:-6.229728,lng:106.6894316},radius:0,id:"",errors:[]},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this;return d.a.createElement(g.a,null,d.a.createElement(h.a,null,d.a.createElement(h.a.Header,null,d.a.createElement(h.a.Title,{as:"h5"},"Attedance Location")),d.a.createElement(h.a.Body,null,d.a.createElement(v.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit},d.a.createElement(p.a.Row,null,d.a.createElement(p.a.Group,{as:m.a,lg:"6",sm:"12"},d.a.createElement(p.a.Label,null,"Latitude"),d.a.createElement(E.a,{onChange:this.handleChange,type:"text",name:"lat",value:this.state.position.lat,validators:["required"],errorMessages:["this field is required"],placeholder:"Input Here..."}),d.a.createElement(p.a.Text,{className:"text-danger"},this.state.errors.lat)),d.a.createElement(p.a.Group,{as:m.a,lg:"6",sm:"12"},d.a.createElement(p.a.Label,null,"Longitude"),d.a.createElement(E.a,{onChange:this.handleChange,type:"text",name:"lng",value:this.state.position.lng,validators:["required"],errorMessages:["this field is required"],placeholder:"Input Here..."}),d.a.createElement(p.a.Text,{className:"text-danger"},this.state.errors.lng))),d.a.createElement(p.a.Group,null,d.a.createElement(p.a.Label,{htmlFor:"radius"},"Radius ",this.state.radius," Meter"),d.a.createElement("input",{type:"range",onChange:function(t){e.setState({radius:parseInt(t.target.value)})},className:"custom-range",min:"10",value:parseInt(this.state.radius),defaultValue:parseInt(this.state.radius),max:"30",id:"radius"})),d.a.createElement(f.a,{size:"sm",type:"submit",variant:"primary",className:"shadow-2 mb-4 btn-block"},"Save Change")),d.a.createElement("div",{style:{height:"500px",width:"100%"}},d.a.createElement(u.Map,{className:"map",google:this.props.google,center:this.state.position,defaultCenter:this.state.position,zoom:19},d.a.createElement(u.Circle,{center:this.state.position,radius:this.state.radius}),d.a.createElement(u.Marker,{name:"Me",position:this.state.position}),d.a.createElement(u.Marker,null))))))}}]),a}(d.a.Component);t.default=Object(u.GoogleApiWrapper)({apiKey:"AIzaSyCE0nvTeHBsiQIrbpMVTe489_O5mwyqofk"})(y)},61:function(e,t,a){"use strict";var r=a(68),n=a(7),o=a(8),i=a(10),s=a(9),l=a(0),u=a.n(l),c=a(60),d=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.errorMessages,t.validators,t.requiredError,t.validatorListener,Object(r.a)(t,["errorMessages","validators","requiredError","validatorListener"]));return u.a.createElement(u.a.Fragment,null,u.a.createElement("input",Object.assign({className:this.state.isValid?"form-control":"form-control invalid"},a,{ref:function(t){e.input=t}})),this.errorText())}},{key:"errorText",value:function(){return this.state.isValid?null:u.a.createElement("small",{className:"form-text text-danger text-left"},this.getErrorMessage())}}]),a}(c.ValidatorComponent);t.a=d}}]);