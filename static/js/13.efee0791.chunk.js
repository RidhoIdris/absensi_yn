(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[13],{209:function(e,t,a){"use strict";a.r(t);var r=a(5),n=a(23),i=a(7),o=a(8),l=a(10),s=a(9),c=a(0),d=a.n(c),m=a(202),u=a(83),h=a(72),p=a.n(h),f=a(20),g=a(66),E=a(90),b=(a(86),a(159)),v=a(71),C=a.n(v),_=a(308),S=a(174),w=a(309),O=a(292),N=a(85),x=a(60),D=a(61),j=C.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),y=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).fetchData=function(e){r.setState({loading:!0});var t="?page="+(parseInt(e.page)+1);t=t+"&limit="+parseInt(e.pageSize),e.filtered.map((function(e){t=t+"&filter["+e.id+"]="+e.value})),e.sorted.map((function(e){t=e.desc?t+"&sort=-"+e.id:t+"&sort="+e.id})),r.setState({parameter:t},(function(){r.getData()}))},r.getData=Object(N.debounce)((function(){p()({methos:"GET",url:"".concat(r.props.base_api_url,"department").concat(r.state.parameter),headers:{Authorization:r.props.auth_token}}).then((function(e){r.setState({tableData:e.data.data,total_pages:e.data.last_page,loading:!1})})).catch((function(e){try{"Unauthorized."===e.response.data&&C.a.fire({title:"Session Expired!",text:"please re-login",icon:"error",confirmButtonText:"Login",allowOutsideClick:!1}).then((function(){localStorage.clear(),window.location.href="login"}))}catch(e){C.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))}),500),r.handleCreate=function(){r.setState({edit:!1,errors:[],id:"",name:"",department_manager_id:"",department_manager_name:"",modalShow:!0})},r.handleDelete=function(e){C.a.fire({title:"Are you sure?",text:"You will not able to revert this!!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.value&&p()({method:"DELETE",url:r.props.base_api_url+"department",data:{id:e.id},headers:{Authorization:r.props.auth_token}}).then((function(e){r.getData(),j.fire({icon:"success",title:"Delete Success"})})).catch((function(e){C.a.fire("Oops...","Something Wrong!","error")}))}))},r.handleSubmit=function(e){var t;e.preventDefault(),t=r.state.edit?r.props.base_api_url+"department/"+r.state.id:r.props.base_api_url+"department",p()({method:r.state.edit?"PUT":"POST",url:t,data:{name:r.state.name,department_manager_id:r.state.department_manager_id},headers:{Authorization:r.props.auth_token}}).then((function(e){r.getData(),r.setState({modalShow:!1}),j.fire({icon:"success",title:r.state.edit?"Update Success":"Create Success"})})).catch((function(e){try{"Unauthorized."===e.response.data?C.a.fire("Session Expired!","please re-login","error").then((function(e){e.value&&(localStorage.clear(),window.location.href="login")})):422===e.response.status&&r.setState({errors:e.response.data.errors})}catch(e){C.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))},r.handleChange=function(e){var t=e.target,a=t.name,i=t.value;r.setState(Object(n.a)({},a,i))},r.onSelectChange=function(e,t){e&&r.setState(Object(n.a)({},t.name,e.value))},r.getUsers=function(){p()({method:"GET",url:r.props.base_api_url+"getUsers",headers:{Authorization:r.props.auth_token}}).then((function(e){r.setState({usersData:e.data})})).catch((function(e){try{"Unauthorized."===e.response.data?C.a.fire("Session Expired!","please re-login","error").then((function(e){e.value&&(localStorage.clear(),window.location.href="login")})):422===e.response.status&&r.setState({errors:e.response.data.errors})}catch(e){C.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))},r.state={loading:!0,parameter:"",errors:[],usersData:[],tableData:[],modalShow:!1,id:"",name:"",department:""},r}return Object(o.a)(a,[{key:"handleEdit",value:function(e){this.setState({edit:!0,errors:[],id:e.id,name:e.name,department_manager_id:e.department_manager_id,department_manager_name:e.department_manager_name,modalShow:!0})}},{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this,t=[{Header:"#",id:"row",filterable:!1,sortable:!1,width:50,Cell:function(e){return e.original.row_num?d.a.createElement("div",null,e.original.row_num):d.a.createElement("div",null,e.index+1)}},{Header:"Name",accessor:"name",filterable:!0},{Header:"Department Manager",accessor:"department_manager_name",filterable:!0},{Header:"created_at",accessor:"created_at",filterable:!0},{Header:"updated_at",accessor:"updated_at",filterable:!0},{Header:"Action",sortable:!1,Cell:function(t){return d.a.createElement("div",{align:"center"},d.a.createElement("h5",null,d.a.createElement("a",{href:"#!",onClick:function(){return e.handleEdit(t.original)}},d.a.createElement(_.a,{variant:"success",className:"mr-2"},"Edit ",d.a.createElement("i",{className:"feather icon-edit"}))),d.a.createElement("a",{href:"#!",onClick:function(){return e.handleDelete(t.original)}},d.a.createElement(_.a,{variant:"danger",className:"mr-2"},"Delete ",d.a.createElement("i",{className:"feather icon-trash-2"})))))}}];return d.a.createElement(f.a,null,d.a.createElement(m.a,null,d.a.createElement(u.a,null,d.a.createElement(S.a,{size:"sm",variant:"primary",style:{width:150},className:"mt-n5 shadow-2 float-right",onClick:this.handleCreate},"Create"),d.a.createElement(g.a,{title:"Department",isOption:!0},d.a.createElement(E.a,{manual:!0,data:this.state.tableData,columns:t,pages:this.state.total_pages,loading:this.state.loading,defaultPageSize:10,onFetchData:function(t,a){e.fetchData(t)},sortable:!0,className:"-striped -highlight"})))),d.a.createElement(w.a,{size:"lg",show:this.state.modalShow,onHide:function(){e.setState({modalShow:!1})}},d.a.createElement(x.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit},d.a.createElement(w.a.Header,{closeButton:!0},d.a.createElement(w.a.Title,null,"Department")),d.a.createElement(w.a.Body,null,d.a.createElement(O.a.Group,null,d.a.createElement(O.a.Label,null,"Department Name"),d.a.createElement(D.a,{onChange:this.handleChange,type:"text",name:"name",value:this.state.name,validators:["required"],errorMessages:["this field is required"],placeholder:"Department Name"}),d.a.createElement(O.a.Text,{className:"text-danger"},this.state.errors.name)),d.a.createElement(O.a.Group,null,d.a.createElement(b.a,Object.assign({onChange:this.onSelectChange,name:"department_manager_id",placeholder:"Select Department Manager",isClearable:!1,isMulti:!1},this.state.edit?{defaultValue:{value:this.state.department_manager_id,label:this.state.department_manager_name}}:{},{options:this.state.usersData,styles:this.state.errors.department_manager_id?{control:function(e,t){return Object(r.a)({},e,{"&:hover":{borderColor:"#dc3545"},borderColor:"#dc3545",boxShadow:"none"})}}:{}})),d.a.createElement(O.a.Text,{className:"text-danger"},this.state.errors.department_manager_id))),d.a.createElement(w.a.Footer,null,d.a.createElement(S.a,{size:"sm",variant:"secondary",onClick:function(){e.setState({modalShow:!1})}},"Close"),d.a.createElement(S.a,{size:"sm",type:"submit",variant:"primary"},this.state.edit?"Edit":"Create")))))}}]),a}(c.Component);t.default=y},61:function(e,t,a){"use strict";var r=a(68),n=a(7),i=a(8),o=a(10),l=a(9),s=a(0),c=a.n(s),d=a(60),m=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.errorMessages,t.validators,t.requiredError,t.validatorListener,Object(r.a)(t,["errorMessages","validators","requiredError","validatorListener"]));return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",Object.assign({className:this.state.isValid?"form-control":"form-control invalid"},a,{ref:function(t){e.input=t}})),this.errorText())}},{key:"errorText",value:function(){return this.state.isValid?null:c.a.createElement("small",{className:"form-text text-danger text-left"},this.getErrorMessage())}}]),a}(d.ValidatorComponent);t.a=m},66:function(e,t,a){"use strict";var r=a(15),n=a(7),i=a(8),o=a(10),l=a(9),s=a(0),c=a.n(s),d=a(311),m=a(162),u=a(307),h=a(62),p=a.n(h),f=a(20),g=a(58),E=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return Object(i.a)(a,[{key:"render",value:function(){var e,t,a,n,i,o=this,l=[];return this.state.isOption&&(a=c.a.createElement("div",{className:"card-header-right"},c.a.createElement(d.a,{alignRight:!0,className:"btn-group card-option"},c.a.createElement(d.a.Toggle,{id:"dropdown-basic",className:"btn-icon"},c.a.createElement("i",{className:"feather icon-more-horizontal"})),c.a.createElement(d.a.Menu,{as:"ul",className:"list-unstyled card-option"},c.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){o.setState((function(e){return{fullCard:!e.fullCard}}))}},c.a.createElement("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),c.a.createElement("a",{href:g.a.BLANK_LINK}," ",this.state.fullCard?"Restore":"Maximize"," ")),c.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){o.setState((function(e){return{collapseCard:!e.collapseCard}}))}},c.a.createElement("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),c.a.createElement("a",{href:g.a.BLANK_LINK}," ",this.state.collapseCard?"Expand":"Collapse"," ")))))),n=c.a.createElement(m.a.Header,null,c.a.createElement(m.a.Title,{as:"h5"},this.props.title),a),this.state.fullCard&&(l=[].concat(Object(r.a)(l),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(l=[].concat(Object(r.a)(l),["card-load"]),t=c.a.createElement("div",{className:"card-loader"},c.a.createElement("i",{className:"pct-loader1 anim-rotate"}))),this.state.cardRemove&&(l=[].concat(Object(r.a)(l),["d-none"])),this.props.cardClass&&(l=[].concat(Object(r.a)(l),[this.props.cardClass])),i=c.a.createElement(m.a,{className:l.join(" "),style:e},n,c.a.createElement(u.a,{in:!this.state.collapseCard},c.a.createElement("div",null,c.a.createElement(m.a.Body,null,this.props.children))),t),c.a.createElement(f.a,null,i)}}]),a}(s.Component);t.a=p()(E)}}]);