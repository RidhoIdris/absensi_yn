(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[15],{298:function(e,t,a){"use strict";a.r(t);var r=a(23),n=a(7),i=a(8),l=a(10),o=a(9),s=a(0),c=a.n(s),d=a(202),m=a(83),u=a(72),h=a.n(u),f=a(20),p=a(66),E=a(90),g=(a(86),a(71)),v=a.n(g),b=a(308),C=a(174),w=a(309),_=a(292),S=a(85),O=a(60),x=a(61),N=a(68),T=a(211),j=a.n(T),y=(a(210),function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.errorMessages,t.validators,t.requiredError,t.validatorListener,Object(N.a)(t,["errorMessages","validators","requiredError","validatorListener"]));return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,Object.assign({},a,{ref:function(t){e.input=t},wrapperClassName:"col-12",className:this.state.isValid?"form-control":"form-control invalid",showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:30,dateFormat:"HH:mm",timeFormat:"HH:mm"})),this.errorText())}},{key:"errorText",value:function(){return this.state.isValid?null:c.a.createElement("small",{className:"form-text text-danger text-left"},this.getErrorMessage())}}]),a}(O.ValidatorComponent)),k=v.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),D=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).fetchData=function(e){i.setState({loading:!0});var t="?page="+(parseInt(e.page)+1);t=t+"&limit="+parseInt(e.pageSize),e.filtered.map((function(e){t=t+"&filter["+e.id+"]="+e.value})),e.sorted.map((function(e){t=e.desc?t+"&sort=-"+e.id:t+"&sort="+e.id})),i.setState({parameter:t},(function(){i.getData()}))},i.getData=Object(S.debounce)((function(){h()({methos:"GET",url:"".concat(i.props.base_api_url,"schedule").concat(i.state.parameter),headers:{Authorization:i.props.auth_token}}).then((function(e){i.setState({tableData:e.data.data,total_pages:e.data.last_page,loading:!1})})).catch((function(e){try{"Unauthorized."===e.response.data&&v.a.fire({title:"Session Expired!",text:"please re-login",icon:"error",confirmButtonText:"Login",allowOutsideClick:!1}).then((function(){localStorage.clear(),window.location.href="login"}))}catch(e){v.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))}),500),i.handleCreate=function(){i.setState({edit:!1,errors:[],id:"",name:"",time_in:"",time_out:"",modalShow:!0})},i.handleDelete=function(e){v.a.fire({title:"Are you sure?",text:"You will not able to revert this!!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.value&&h()({method:"DELETE",url:i.props.base_api_url+"schedule",data:{id:e.id},headers:{Authorization:i.props.auth_token}}).then((function(e){i.getData(),k.fire({icon:"success",title:"User Deleted"})})).catch((function(e){v.a.fire("Oops...","Something Wrong!","error")}))}))},i.handleSubmit=function(e){var t;e.preventDefault(),t=i.state.edit?i.props.base_api_url+"schedule/"+i.state.id:i.props.base_api_url+"schedule",h()({method:i.state.edit?"PUT":"POST",url:t,data:{name:i.state.name,time_in:i.state.time_in,time_out:i.state.time_out},headers:{Authorization:i.props.auth_token}}).then((function(e){i.getData(),i.setState({modalShow:!1}),k.fire({icon:"success",title:i.state.edit?"Update Success":"Delete Success"})})).catch((function(e){try{"Unauthorized."===e.response.data?v.a.fire("Session Expired!","please re-login","error").then((function(e){e.value&&(localStorage.clear(),window.location.href="login")})):422===e.response.status&&i.setState({errors:e.response.data.errors})}catch(e){v.a.fire({title:"Oops Something Wrong!!!",icon:"error",confirmButtonText:"Refresh",allowOutsideClick:!1}).then((function(){window.location.reload()}))}}))},i.handleChange=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(r.a)({},a,n))},i.state={loading:!0,parameter:"",errors:[],tableData:[],modalShow:!1,id:"",name:"",time_in:new Date,time_out:new Date},i}return Object(i.a)(a,[{key:"handleEdit",value:function(e){this.setState({edit:!0,errors:[],id:e.id,name:e.name,time_in:new Date("2020-01-01 "+e.time_in),time_out:new Date("2020-01-01 "+e.time_out),modalShow:!0})}},{key:"render",value:function(){var e=this,t=[{Header:"#",id:"row",filterable:!1,sortable:!1,width:50,Cell:function(e){return e.original.row_num?c.a.createElement("div",null,e.original.row_num):c.a.createElement("div",null,e.index+1)}},{Header:"Name",accessor:"name",filterable:!0},{Header:"Time In",accessor:"time_in",filterable:!0},{Header:"Time Out",accessor:"time_out",filterable:!0},{Header:"created_at",accessor:"created_at",filterable:!0},{Header:"updated_at",accessor:"updated_at",filterable:!0},{Header:"Action",sortable:!1,Cell:function(t){return c.a.createElement("div",{align:"center"},c.a.createElement("h5",null,c.a.createElement("a",{href:"#!",onClick:function(){return e.handleEdit(t.original)}},c.a.createElement(b.a,{variant:"success",className:"mr-2"},"Edit ",c.a.createElement("i",{className:"feather icon-edit"}))),c.a.createElement("a",{href:"#!",onClick:function(){return e.handleDelete(t.original)}},c.a.createElement(b.a,{variant:"danger",className:"mr-2"},"Delete ",c.a.createElement("i",{className:"feather icon-trash-2"})))))}}];return c.a.createElement(f.a,null,c.a.createElement(d.a,null,c.a.createElement(m.a,null,c.a.createElement(C.a,{size:"sm",variant:"primary",style:{width:150},className:"mt-n5 shadow-2 float-right",onClick:this.handleCreate},"Create"),c.a.createElement(p.a,{title:"Schedule",isOption:!0},c.a.createElement(E.a,{manual:!0,data:this.state.tableData,columns:t,pages:this.state.total_pages,loading:this.state.loading,defaultPageSize:10,onFetchData:function(t,a){e.fetchData(t)},sortable:!0,className:"-striped -highlight"})))),c.a.createElement(w.a,{size:"lg",show:this.state.modalShow,onHide:function(){e.setState({modalShow:!1})}},c.a.createElement(O.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit},c.a.createElement(w.a.Header,{closeButton:!0},c.a.createElement(w.a.Title,null,"Schedule")),c.a.createElement(w.a.Body,null,c.a.createElement(_.a.Group,null,c.a.createElement(_.a.Label,null,"Name"),c.a.createElement(x.a,{onChange:this.handleChange,type:"text",name:"name",value:this.state.name,validators:["required"],errorMessages:["this field is required"],placeholder:"Name"}),c.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.name)),c.a.createElement(_.a.Row,null,c.a.createElement(_.a.Group,{as:m.a},c.a.createElement(_.a.Label,null,"Time In"),c.a.createElement(y,{selected:this.state.time_in,value:this.state.time_in,onChange:function(t){e.setState({time_in:t})},placeholderText:"Time In",validators:["required"],errorMessages:["this field is required"],timeCaption:"Time In"}),c.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.time_in)),c.a.createElement(_.a.Group,{as:m.a},c.a.createElement(_.a.Label,null,"Time Out"),c.a.createElement(y,{selected:this.state.time_out,value:this.state.time_out,onChange:function(t){e.setState({time_out:t})},placeholderText:"Time In",validators:["required"],errorMessages:["this field is required"],timeCaption:"Time Out"}),c.a.createElement(_.a.Text,{className:"text-danger"},this.state.errors.time_out)))),c.a.createElement(w.a.Footer,null,c.a.createElement(C.a,{size:"sm",variant:"secondary",onClick:function(){e.setState({modalShow:!1})}},"Close"),c.a.createElement(C.a,{size:"sm",type:"submit",variant:"primary"},this.state.edit?"Edit":"Create")))))}}]),a}(s.Component);t.default=D},61:function(e,t,a){"use strict";var r=a(68),n=a(7),i=a(8),l=a(10),o=a(9),s=a(0),c=a.n(s),d=a(60),m=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.errorMessages,t.validators,t.requiredError,t.validatorListener,Object(r.a)(t,["errorMessages","validators","requiredError","validatorListener"]));return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",Object.assign({className:this.state.isValid?"form-control":"form-control invalid"},a,{ref:function(t){e.input=t}})),this.errorText())}},{key:"errorText",value:function(){return this.state.isValid?null:c.a.createElement("small",{className:"form-text text-danger text-left"},this.getErrorMessage())}}]),a}(d.ValidatorComponent);t.a=m},66:function(e,t,a){"use strict";var r=a(15),n=a(7),i=a(8),l=a(10),o=a(9),s=a(0),c=a.n(s),d=a(311),m=a(162),u=a(307),h=a(62),f=a.n(h),p=a(20),E=a(58),g=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return Object(i.a)(a,[{key:"render",value:function(){var e,t,a,n,i,l=this,o=[];return this.state.isOption&&(a=c.a.createElement("div",{className:"card-header-right"},c.a.createElement(d.a,{alignRight:!0,className:"btn-group card-option"},c.a.createElement(d.a.Toggle,{id:"dropdown-basic",className:"btn-icon"},c.a.createElement("i",{className:"feather icon-more-horizontal"})),c.a.createElement(d.a.Menu,{as:"ul",className:"list-unstyled card-option"},c.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){l.setState((function(e){return{fullCard:!e.fullCard}}))}},c.a.createElement("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),c.a.createElement("a",{href:E.a.BLANK_LINK}," ",this.state.fullCard?"Restore":"Maximize"," ")),c.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){l.setState((function(e){return{collapseCard:!e.collapseCard}}))}},c.a.createElement("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),c.a.createElement("a",{href:E.a.BLANK_LINK}," ",this.state.collapseCard?"Expand":"Collapse"," ")))))),n=c.a.createElement(m.a.Header,null,c.a.createElement(m.a.Title,{as:"h5"},this.props.title),a),this.state.fullCard&&(o=[].concat(Object(r.a)(o),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(o=[].concat(Object(r.a)(o),["card-load"]),t=c.a.createElement("div",{className:"card-loader"},c.a.createElement("i",{className:"pct-loader1 anim-rotate"}))),this.state.cardRemove&&(o=[].concat(Object(r.a)(o),["d-none"])),this.props.cardClass&&(o=[].concat(Object(r.a)(o),[this.props.cardClass])),i=c.a.createElement(m.a,{className:o.join(" "),style:e},n,c.a.createElement(u.a,{in:!this.state.collapseCard},c.a.createElement("div",null,c.a.createElement(m.a.Body,null,this.props.children))),t),c.a.createElement(p.a,null,i)}}]),a}(s.Component);t.a=f()(g)}}]);